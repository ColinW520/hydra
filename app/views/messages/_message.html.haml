%tr{id: "message_#{message.id}"}
  %td= local_time_ago message.created_at
  %td
    - if message.direction == 'outbound'
      %i.fa.fa-arrow-up.text-success
      Out
    - else
      %i.fa.fa-arrow-down.text-primary
      In
  %td
    - if message.direction == 'outbound'
      = link_to contact_path(message.contact) do
        %i.fa.fa-user
        = message.contact.full_name
    - else
      = link_to line_path(message.line) do
        %i.fa.fa-hashtag
        = message.line.name
  %td
    - if message.direction == 'inbound'
      = link_to contact_path(message.contact) do
        %i.fa.fa-user
        = message.contact.full_name
    - else
      = link_to line_path(message.line) do
        %i.fa.fa-hashtag
        = message.line.name
  %td= message.body
  %td
    .btn-group
      = link_to new_message_request_path(contact_ids: [message.contact_id]), remote: true, class: 'btn btn-sm text-success', title: "Message this Member", 'data-toggle' => 'tooltip', 'data-placement' => 'left' do
        %i.fa.fa-reply
      %button.btn.btn-sm.btn-secondary{"aria-describedby" => "popover", "data-html" => "true", "data-container" => "body", "data-content" => message.detail_table, "data-original-title" => "Message Details", "data-placement" => "left", "data-toggle" => "popover", :title => "Message Details", :type => "button"}
        %i.fa.fa-info-circle


= render "contacts/dialog"
= render "message_requests/dialog"
